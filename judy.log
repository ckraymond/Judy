2024-07-06 12:17:52,837-INFO-__main__ > Initializing the program.
2024-07-06 12:17:55,043-INFO-judyMVP.__init__ > Initializing the program.
2024-07-06 12:17:55,043-INFO-bubbleAPI.get_settings > Getting patient and device settings from Bubble.
2024-07-06 12:17:55,057-DEBUG-Starting new HTTPS connection (1): colinkraymond.bubbleapps.io:443
2024-07-06 12:17:55,219-DEBUG-https://colinkraymond.bubbleapps.io:443 "GET /version-test/api/1.1/obj/setting HTTP/1.1" 401 None
2024-07-06 12:17:55,221-INFO-bubbleAPI.get_settings > response: {'error_class': 'Unauthorized', 'args': {'code': '1720282675185x707304952066876400'}, 'message': Non
2024-07-06 12:17:55,226-DEBUG-Starting new HTTPS connection (1): colinkraymond.bubbleapps.io:443
2024-07-06 12:17:55,427-DEBUG-https://colinkraymond.bubbleapps.io:443 "GET /version-test/api/1.1/wf/gen_api_token?email=colin@judydevice.com&pw=4Nk!%3EpG7 HTTP/1.1" 200 None
2024-07-06 12:17:55,429-INFO-bubbleAPI.get_token > Getting new API key using credentials for colin@judydevice.com
2024-07-06 12:17:55,433-DEBUG-Starting new HTTPS connection (1): colinkraymond.bubbleapps.io:443
2024-07-06 12:17:55,670-DEBUG-https://colinkraymond.bubbleapps.io:443 "GET /version-test/api/1.1/obj/setting HTTP/1.1" 200 None
2024-07-06 12:17:55,672-INFO-bubbleAPI.get_settings > {'response': {'cursor': 0, 'results': [{'Modified Date': '2024-07-06T01:43:43.074Z', 'Created Date': '2024-07-04T16:37:39.082Z', 'Created By': '1719433427015x760125662067258500', 'accent': 'Australian', 'photo_delay': 3, 'trigger': 'Judy', 'patient': '1720111058938x567839568571831800', 'caretaker': '1719433427015x760125662067258500', 'watcher': ['1719860906321x399833294943004350', '1719455494380x913745027397094800', '1719524279490x374511007917295100'], '_id': '1720111058482x902662854976995300'}], 'count': 1, 'remaining': 0}}
2024-07-06 12:17:55,672-INFO-userSettings.pull_settings > Imported settings: {'photo_delay': 3, 'accent': 'Australian', 'trigger': 'Judy'}
2024-07-06 12:17:55,672-INFO-chatHistory.__init__ > Loading the chat history
2024-07-06 12:17:55,672-INFO-chatHistory.load_all_conversations > Starting to load all of the conversations.
2024-07-06 12:17:55,672-INFO-bubbleAPI.get_exch_conv > Getting, conversation, records from Bubble.
2024-07-06 12:17:55,676-DEBUG-Starting new HTTPS connection (1): colinkraymond.bubbleapps.io:443
2024-07-06 12:17:55,885-DEBUG-https://colinkraymond.bubbleapps.io:443 "GET /version-test/api/1.1/obj/conversation?cursor=0&limit=100 HTTP/1.1" 200 None
2024-07-06 12:17:55,890-INFO-bubbleAPI.get_records > [{'Created Date': '2024-07-04T19:19:31.646Z', 'Created By': '1720111058938x567839568571831800', 'Modified Date': '2024-07-04T19:24:42.777Z', 'summary': "The patient is seeking gift ideas for their wife's upcoming birthday and for a 50th birthday, showing consideration and thoughtfulness in their gift-giving approach.", 'date': '2024-07-04T15:16:03.233Z', 'sentiment': 4, 'keywords': "gift ideas,wife's birthday,50th birthday", 'caretaker': '1719433427015x760125662067258500', 'patient': '1720111058938x567839568571831800', 'watcher': [], '_id': '1720120771646x951002185613836200'}, {'Created Date': '2024-07-04T19:28:13.799Z', 'Created By': '1720111058938x567839568571831800', 'Modified Date': '2024-07-04T19:36:16.184Z', 'summary': 'The patient expressed a desire to watch 4th of July fireworks in Washington, DC, but is unable to attend, and the assistant suggested alternative ways to celebrate.', 'date': '2024-07-04T15:23:36.151Z', 'sentiment': 3, 'keywords': '4th of July,Washington DC,National Mall,fireworks,celebration', 'caretaker': '1719433427015x760125662067258500', 'patient': '1720111058938x567839568571831800', 'watcher': [], '_id': '1720121293799x914728173000089000'}, {'Created Date': '2024-07-04T20:07:03.549Z', 'Created By': '1720111058938x567839568571831800', 'Modified Date': '2024-07-05T00:08:48.224Z', 'summary': "The patient requested assistance with a 'quir program' but did not provide further context or clarification.", 'date': '2024-07-04T15:36:13.592Z', 'sentiment': 3, 'keywords': 'quir program', 'caretaker': '1719433427015x760125662067258500', 'patient': '1720111058938x567839568571831800', 'watcher': [], '_id': '1720123623549x587893450537901840'}, {'Created Date': '2024-07-05T02:54:42.759Z', 'Created By': '1720111058938x567839568571831800', 'Modified Date': '2024-07-05T18:13:57.274Z', 'summary': 'The patient is seeking suggestions on activities to do with Luciane and is looking for ways to spend quality time together.', 'date': '2024-07-04T20:07:49.119Z', 'sentiment': 4, 'keywords': 'Luciane,activities,quality time', 'caretaker': '1719433427015x760125662067258500', 'patient': '1720111058938x567839568571831800', 'watcher': [], '_id': '1720148082758x320453311437771900'}, {'Created Date': '2024-07-05T23:07:09.770Z', 'Created By': '1720111058938x567839568571831800', 'Modified Date': '2024-07-05T23:13:09.264Z', 'summary': 'The patient inquired about their wife and received information about Luciane Raymond, including her birthdate and interests.', 'date': '2024-07-05T14:13:22.899Z', 'sentiment': 4, 'keywords': 'wife,Luciane Raymond,birthdate,interests', 'caretaker': '1719433427015x760125662067258500', 'patient': '1720111058938x567839568571831800', 'watcher': [], '_id': '1720220829770x132209300896124480'}]
2024-07-06 12:17:55,890-INFO-bubbleAPI.get_records > Total conversation records pulled: 9
2024-07-06 12:17:55,890-INFO-chatHistory.load_all_conversations > [{'Created Date': '2024-07-04T19:19:31.646Z', 'Cre
2024-07-06 12:17:55,895-INFO-chatHistory.load_all_conversations > Total conversations loaded: 9
2024-07-06 12:17:55,895-INFO-chatHistory.load_all_exchangess > Pulling list of exchanges from Bubble API.
2024-07-06 12:17:55,895-INFO-bubbleAPI.get_exch_conv > Getting, chatexchange, records from Bubble.
2024-07-06 12:17:55,898-DEBUG-Starting new HTTPS connection (1): colinkraymond.bubbleapps.io:443
2024-07-06 12:17:56,127-DEBUG-https://colinkraymond.bubbleapps.io:443 "GET /version-test/api/1.1/obj/chatexchange?cursor=0&limit=100 HTTP/1.1" 200 None
2024-07-06 12:17:56,130-INFO-bubbleAPI.get_records > [{'Created Date': '2024-07-04T19:16:04.136Z', 'Created By': '1720111058938x567839568571831800', 'Modified Date': '2024-07-04T19:19:33.264Z', 'date': '2024-07-04T15:16:03.233Z', 'query': 'Do you know where there are some good Italian restaurants near me?', 'response': "I'm sorry, Colin. I don't have your current location information to suggest Italian restaurants nearby. Would you like me to help you find some based on a specific location?", 'summary': 'The patient, Colin, asked the assistant about good Italian restaurants near him and requested help finding some based on a specific location.', 'conversation': '1720120771646x951002185613836200', 'patient': '1720111058938x567839568571831800', 'caretaker': '1719433427015x760125662067258500', 'watcher': [], '_id': '1720120564136x271686411888959040'}, {'Created Date': '2024-07-04T19:16:24.305Z', 'Created By': '1720111058938x567839568571831800', 'Modified Date': '2024-07-04T19:19:33.556Z', 'date': '2024-07-04T15:16:23.426Z', 'query': 'Do you know where my family is?', 'response': 'Your family members, Luciane, Adelaide, Bruce, Elizabeth, and Llilian, all live in Annandale, VA, USA.', 'summary': 'The patient seems concerned about the whereabouts of their family members Luciane, Adelaide, Bruce, Elizabeth, and Llilian, who live in Annandale, VA, USA, and the assistant provided information about their location.', 'conversation': '1720120771646x951002185613836200', 'patient': '1720111058938x567839568571831800', 'caretaker': '1719433427015x760125662067258500', 'watcher': [], '_id': '1720120584305x201853802422198530'}, {'Created Date': '2024-07-04T19:16:55.266Z', 'Created By': '1720111058938x567839568571831800', 'Modified Date': '2024-07-04T19:19:33.808Z', 'date': '2024-07-04T15:16:54.201Z', 'query': "What should I get my wife for her birthday? Isn't it soon?", 'response': "Yes, Colin, your wife Luciane's birthday is on May 21st. You could consider getting her something related to her interests like camping, gardening, or volleyball. Would you like help with gift ideas?", 'summary': "The patient, Colin, is seeking gift ideas for his wife Luciane's upcoming birthday and appears to be in a thoughtful and considerate mood.", 'conversation': '1720120771646x951002185613836200', 'patient': '1720111058938x567839568571831800', 'caretaker': '1719433427015x760125662067258500', 'watcher': [], '_id': '1720120615266x246206982884124900'}, {'Created Date': '2024-07-04T19:17:15.487Z', 'Created By': '1720111058938x567839568571831800', 'Modified Date': '2024-07-04T19:19:34.056Z', 'date': '2024-07-04T15:17:14.296Z', 'query': 'Yes please.', 'response': "How about a new gardening tool set, a camping gear upgrade, or maybe tickets to a volleyball game? These could be thoughtful gifts based on Luciane's hobbies.", 'summary': 'The patient is interested in receiving gift suggestions related to hobbies like gardening, camping, and volleyball, and the assistant has recommended a gardening tool set, camping gear upgrade, or volleyball game tickets as potential gifts.', 'conversation': '1720120771646x951002185613836200', 'patient': '1720111058938x567839568571831800', 'caretaker': '1719433427015x760125662067258500', 'watcher': [], '_id': '1720120635487x448895144730829100'}, {'Created Date': '2024-07-04T19:17:38.678Z', 'Created By': '1720111058938x567839568571831800', 'Modified Date': '2024-07-04T19:19:34.319Z', 'date': '2024-07-04T15:17:37.337Z', 'query': 'What is the best thing to give someone for their 50th birthday?', 'response': "For a 50th birthday, thoughtful gifts could include personalized items, experiences like a spa day or a weekend getaway, or something related to their hobbies or interests. Is there a specific person you're thinking of getting a gift for?", 'summary': "The patient is seeking gift ideas for someone's 50th birthday and the assistant suggests personalized items, experiences, or hobby-related gifts.", 'conversation': '1720120771646x951002185613836200', 'patient': '1720111058938x567839568571831800', 'caretaker': '1719433427015x760125662067258500', 'watcher': [], '_id': '1720120658678x448359273476094400'}]
2024-07-06 12:17:56,130-INFO-bubbleAPI.get_records > Total chatexchange records pulled: 23
2024-07-06 12:17:56,130-INFO-chatHistory.load_all_exchanges > Loaded 23 exchanges from Bubble.
2024-07-06 12:17:56,130-INFO-chatHistory.load_all_exchanges > Added ID 1720120564136x271686411888959040 to exchanges: {'query': 'Do you know where there are some good I
2024-07-06 12:17:56,131-INFO-chatHistory.load_all_exchanges > Added ID 1720120584305x201853802422198530 to exchanges: {'query': 'Do you know where my family is?', 'resp
2024-07-06 12:17:56,131-INFO-chatHistory.load_all_exchanges > Added ID 1720120615266x246206982884124900 to exchanges: {'query': "What should I get my wife for her birth
2024-07-06 12:17:56,131-INFO-chatHistory.load_all_exchanges > Added ID 1720120635487x448895144730829100 to exchanges: {'query': 'Yes please.', 'response': "How about a 
2024-07-06 12:17:56,131-INFO-chatHistory.load_all_exchanges > Added ID 1720120658678x448359273476094400 to exchanges: {'query': 'What is the best thing to give someone 
2024-07-06 12:17:56,131-INFO-chatHistory.load_all_exchanges > Added ID 1720121018525x593413394017978200 to exchanges: {'query': 'Where are the best places to watch 4th 
2024-07-06 12:17:56,131-INFO-chatHistory.load_all_exchanges > Added ID 1720121050399x331232550955648200 to exchanges: {'query': 'Yes. Can you tell me about the national
2024-07-06 12:17:56,131-INFO-chatHistory.load_all_exchanges > Added ID 1720121082395x570314878513968260 to exchanges: {'query': "I wish I could go there but I'm stuck h
2024-07-06 12:17:56,132-INFO-chatHistory.load_all_exchanges > Added ID 1720121775932x383233671535407700 to exchanges: {'query': 'quir program', 'response': 'I\'m sorry,
2024-07-06 12:17:56,132-INFO-chatHistory.load_all_exchanges > Added ID 1720138071002x268031761567931070 to exchanges: {'query': 'where are my family', 'response': 'Your
2024-07-06 12:17:56,132-INFO-chatHistory.load_all_exchanges > Added ID 1720138127763x201956807277150270 to exchanges: {'query': 'what should I do with Luciani today wha
2024-07-06 12:17:56,132-INFO-chatHistory.load_all_exchanges > Added ID 1720203204927x243746927696383300 to exchanges: {'query': 'cool', 'response': "I'm glad you think 
2024-07-06 12:17:56,132-INFO-chatHistory.load_all_exchanges > Added ID 1720203237041x310684772416320000 to exchanges: {'query': "where's my brother go", 'response': "I 
2024-07-06 12:17:56,132-INFO-chatHistory.load_all_exchanges > Added ID 1720203293628x801288540901252000 to exchanges: {'query': "who's my wife", 'response': 'Your wife 
2024-07-06 12:17:56,132-INFO-chatHistory.load_all_exchanges > Added ID 1720221189037x991601893634590500 to exchanges: {'query': "What is today's date?", 'response': 'To
2024-07-06 12:17:56,132-INFO-chatHistory.load_all_exchanges > Added ID 1720221336140x474892033635542200 to exchanges: {'query': 'What is the best way to rpune roses?', 
2024-07-06 12:17:56,132-INFO-chatHistory.load_all_exchanges > Added ID 1720221407778x645953969526927200 to exchanges: {'query': "I am thinking about getting something f
2024-07-06 12:17:56,132-INFO-chatHistory.load_all_exchanges > Added ID 1720227335902x361588783846762430 to exchanges: {'query': 'just trying to figure out what I should
2024-07-06 12:17:56,132-INFO-chatHistory.load_all_exchanges > Added ID 1720227367865x474640013270208200 to exchanges: {'query': 'do you know where my family is', 'respo
2024-07-06 12:17:56,132-INFO-chatHistory.load_all_exchanges > Added ID 1720238221378x650752404876306000 to exchanges: {'query': 'who is my son', 'response': "Your son's
2024-07-06 12:17:56,133-INFO-chatHistory.load_all_exchanges > Added ID 1720238266487x562150658300045060 to exchanges: {'query': "so I'm thinking about doing something w
2024-07-06 12:17:56,133-INFO-chatHistory.load_all_exchanges > Added ID 1720238294345x982324127417746600 to exchanges: {'query': 'do you have any other suggestions for s
2024-07-06 12:17:56,133-INFO-chatHistory.load_all_exchanges > Added ID 1720238331713x841483215378408000 to exchanges: {'query': 'yeah what do you think the cutest kind 
2024-07-06 12:17:56,133-INFO-chatHistory.load_all_exchanges > Total exchanges loaded: 23
2024-07-06 12:17:56,133-INFO-chatHistory.clean_exchanges > Cleaning the exchange data.
2024-07-06 12:17:56,133-DEBUG-chatHistory.check_summary > Checking summary on 1720120564136x271686411888959040
2024-07-06 12:17:56,133-DEBUG-chatHistory.check_summary > Checking summary on 1720120584305x201853802422198530
2024-07-06 12:17:56,133-DEBUG-chatHistory.check_summary > Checking summary on 1720120615266x246206982884124900
2024-07-06 12:17:56,133-DEBUG-chatHistory.check_summary > Checking summary on 1720120635487x448895144730829100
2024-07-06 12:17:56,133-DEBUG-chatHistory.check_summary > Checking summary on 1720120658678x448359273476094400
2024-07-06 12:17:56,133-DEBUG-chatHistory.check_summary > Checking summary on 1720121018525x593413394017978200
2024-07-06 12:17:56,133-DEBUG-chatHistory.check_summary > Checking summary on 1720121050399x331232550955648200
2024-07-06 12:17:56,133-DEBUG-chatHistory.check_summary > Checking summary on 1720121082395x570314878513968260
2024-07-06 12:17:56,133-DEBUG-chatHistory.check_summary > Checking summary on 1720121775932x383233671535407700
2024-07-06 12:17:56,133-DEBUG-chatHistory.check_summary > Checking summary on 1720138071002x268031761567931070
2024-07-06 12:17:56,133-DEBUG-chatHistory.check_summary > Checking summary on 1720138127763x201956807277150270
2024-07-06 12:17:56,133-DEBUG-chatHistory.check_summary > Checking summary on 1720203204927x243746927696383300
2024-07-06 12:17:56,133-DEBUG-chatHistory.check_summary > Checking summary on 1720203237041x310684772416320000
2024-07-06 12:17:56,134-DEBUG-chatHistory.check_summary > Checking summary on 1720203293628x801288540901252000
2024-07-06 12:17:56,134-DEBUG-chatHistory.check_summary > Checking summary on 1720221189037x991601893634590500
2024-07-06 12:17:56,134-DEBUG-chatHistory.check_summary > Checking summary on 1720221336140x474892033635542200
2024-07-06 12:17:56,134-DEBUG-chatHistory.check_summary > Checking summary on 1720221407778x645953969526927200
2024-07-06 12:17:56,134-DEBUG-chatHistory.check_summary > Checking summary on 1720227335902x361588783846762430
2024-07-06 12:17:56,134-DEBUG-chatHistory.check_summary > Checking summary on 1720227367865x474640013270208200
2024-07-06 12:17:56,134-DEBUG-chatHistory.check_summary > Checking summary on 1720238221378x650752404876306000
2024-07-06 12:17:56,134-DEBUG-chatHistory.check_summary > Checking summary on 1720238266487x562150658300045060
2024-07-06 12:17:56,134-DEBUG-chatHistory.check_summary > Checking summary on 1720238294345x982324127417746600
2024-07-06 12:17:56,134-DEBUG-chatHistory.check_summary > Checking summary on 1720238331713x841483215378408000
2024-07-06 12:17:56,134-INFO-chatHistory.clean_exchanges > Total exchanges after cleaning: 23
2024-07-06 12:17:56,134-INFO-chatHistory.check_mappings > In the check_mappings function
2024-07-06 12:17:56,134-INFO-Sorting through these exchanges: 23
2024-07-06 12:17:56,134-INFO-Total exchanges after checking mapping: 23
2024-07-06 12:17:56,134-INFO-Total conversations after checking mapping: 9
2024-07-06 12:17:56,134-INFO-Checked conversations and identified those to be updated.
2024-07-06 12:17:56,134-DEBUG-chatHistory.rev_conversations > Found matching conversation for exchange.
2024-07-06 12:17:56,135-DEBUG-chatHistory.rev_conversations > Found matching conversation for exchange.
2024-07-06 12:17:56,135-DEBUG-chatHistory.rev_conversations > Found matching conversation for exchange.
2024-07-06 12:17:56,135-DEBUG-chatHistory.rev_conversations > Found matching conversation for exchange.
2024-07-06 12:17:56,135-DEBUG-chatHistory.rev_conversations > Last exchange: 2024-07-05 23:58:49.763000
2024-07-06 12:17:56,135-DEBUG-chatHistory.rev_conversations > Difference in time: 44346.372266
2024-07-06 12:17:56,135-INFO-chatHistory.rev_conversations > Cleaning conversation: 1720238585367x468678047399971900
2024-07-06 12:17:56,136-DEBUG-load_ssl_context verify=True cert=None trust_env=True http2=False
2024-07-06 12:17:56,137-DEBUG-load_verify_locations cafile='/Users/colin/Judy/.venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-07-06 12:17:56,178-DEBUG-Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'Any response should be in a JSON format with three fields: summary, sentiment, and keywords.'}, {'role': 'user', 'content': 'who is my son'}, {'role': 'system', 'content': "Your son's name is Bruce Raymond. He was born on January 15, 2011, and his interests include soccer, history, and model making. Bruce also goes by the nickname Boo Boo."}, {'role': 'user', 'content': "so I'm thinking about doing something with my son Bruce next Wednesday do you have any suggestions for what we could do"}, {'role': 'system', 'content': 'How about planning a fun day out with Bruce, like going to a soccer game or visiting a history museum together? It could be a great bonding experience for both of you.'}, {'role': 'user', 'content': 'do you have any other suggestions for stuff that we could do'}, {'role': 'system', 'content': 'You could also consider building a model together or exploring a new hobby that you both might enjoy. Spending quality time together is always a great idea.'}, {'role': 'user', 'content': 'yeah what do you think the cutest kind of dog is'}, {'role': 'system', 'content': 'Puppies are often considered the cutest kind of dog, with breeds like Golden Retrievers, Labrador Retrievers, and French Bulldogs being popular choices. Do you have a favorite type of dog, Colin?'}, {'role': 'user', 'content': 'Provide your output in a JSON format with two keys: summary, sentiment, and keywords.\n\n                        Using the conversation above as a model the fields should have the following information:\n\n                        In summary, it should be a one sentence summary of the conversation that highlights what was talked about \n                        and talking about any emotions or concerns that I have should be identified. Also, you should refer to me \n                        as the patient and yourself as the assistant.\n\n                        In sentiment, assign a number between 1 and 5 for how I seem to be feeling. 1 would be extremely depressed \n                        and 5 would be extremely happy.\n\n                        In keywords, provide a comma-delimited list of any places, people, or events that are referenced\n                        in our conversation. There should be at least one keyword and no more than five.'}], 'model': 'gpt-3.5-turbo', 'temperature': 0}}
2024-07-06 12:17:56,200-DEBUG-Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-07-06 12:17:56,200-DEBUG-connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2024-07-06 12:17:56,221-DEBUG-connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1080dffb0>
2024-07-06 12:17:56,221-DEBUG-start_tls.started ssl_context=<ssl.SSLContext object at 0x107e7f3d0> server_hostname='api.openai.com' timeout=5.0
2024-07-06 12:17:56,236-DEBUG-start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1080e48c0>
2024-07-06 12:17:56,236-DEBUG-send_request_headers.started request=<Request [b'POST']>
2024-07-06 12:17:56,236-DEBUG-send_request_headers.complete
2024-07-06 12:17:56,236-DEBUG-send_request_body.started request=<Request [b'POST']>
2024-07-06 12:17:56,237-DEBUG-send_request_body.complete
2024-07-06 12:17:56,237-DEBUG-receive_response_headers.started request=<Request [b'POST']>
2024-07-06 12:17:57,047-DEBUG-receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sat, 06 Jul 2024 16:17:57 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'openai-organization', b'user-iwjpkoonfj25h8hq9pxy4g0n'), (b'openai-processing-ms', b'549'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'60000'), (b'x-ratelimit-remaining-requests', b'9999'), (b'x-ratelimit-remaining-tokens', b'59482'), (b'x-ratelimit-reset-requests', b'8.64s'), (b'x-ratelimit-reset-tokens', b'518ms'), (b'x-request-id', b'req_35fd5c8344886b65682acd7433f3333b'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=5GgKLjm1OIDi07_lTfloh2IxMZFCFuWKnNn2ao_xyV8-1720282677-1.0.1.1-Kt8zKid6SFYP6.zMgIbgVrZW4p9d6v6doTSl1h0nd2MixGz.fRRO6tgcY8eTuXLrUvqAUJr3IzPujo7TPNLt.g; path=/; expires=Sat, 06-Jul-24 16:47:57 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Set-Cookie', b'_cfuvid=QukLFoXB2LvDzMODxO5WKGhQRDTGUgEChoS96HZihXY-1720282677064-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'89f0e866abd85935-IAD'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-07-06 12:17:57,050-INFO-HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-07-06 12:17:57,050-DEBUG-receive_response_body.started request=<Request [b'POST']>
2024-07-06 12:17:57,051-DEBUG-receive_response_body.complete
2024-07-06 12:17:57,051-DEBUG-response_closed.started
2024-07-06 12:17:57,051-DEBUG-response_closed.complete
2024-07-06 12:17:57,051-DEBUG-HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers([('date', 'Sat, 06 Jul 2024 16:17:57 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('openai-organization', 'user-iwjpkoonfj25h8hq9pxy4g0n'), ('openai-processing-ms', '549'), ('openai-version', '2020-10-01'), ('strict-transport-security', 'max-age=31536000; includeSubDomains'), ('x-ratelimit-limit-requests', '10000'), ('x-ratelimit-limit-tokens', '60000'), ('x-ratelimit-remaining-requests', '9999'), ('x-ratelimit-remaining-tokens', '59482'), ('x-ratelimit-reset-requests', '8.64s'), ('x-ratelimit-reset-tokens', '518ms'), ('x-request-id', 'req_35fd5c8344886b65682acd7433f3333b'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=5GgKLjm1OIDi07_lTfloh2IxMZFCFuWKnNn2ao_xyV8-1720282677-1.0.1.1-Kt8zKid6SFYP6.zMgIbgVrZW4p9d6v6doTSl1h0nd2MixGz.fRRO6tgcY8eTuXLrUvqAUJr3IzPujo7TPNLt.g; path=/; expires=Sat, 06-Jul-24 16:47:57 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('set-cookie', '_cfuvid=QukLFoXB2LvDzMODxO5WKGhQRDTGUgEChoS96HZihXY-1720282677064-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('server', 'cloudflare'), ('cf-ray', '89f0e866abd85935-IAD'), ('content-encoding', 'gzip'), ('alt-svc', 'h3=":443"; ma=86400')])
2024-07-06 12:17:57,051-DEBUG-request_id: req_35fd5c8344886b65682acd7433f3333b
2024-07-06 12:17:57,059-DEBUG-chatHistory.save_history > Saving conversation: 1720238585367x468678047399971900
2024-07-06 12:17:57,059-INFO-bubbleAPI.update_conv_rcds > Updating conversation (ID: 1720238585367x468678047399971900) to Bubble.
2024-07-06 12:17:57,062-DEBUG-Starting new HTTPS connection (1): colinkraymond.bubbleapps.io:443
2024-07-06 12:17:57,294-DEBUG-https://colinkraymond.bubbleapps.io:443 "POST /version-test/api/1.1/wf/put_conversation HTTP/1.1" 200 None
2024-07-06 12:17:57,296-INFO-chatHistory.remove_orph_convos > Checking for orphaned conversations.
2024-07-06 12:17:57,296-DEBUG-patientInfo.__init__ > Getting patient information.
2024-07-06 12:17:57,296-INFO-bubbleAPI.get_exch_conv > Getting, user, records from Bubble.
2024-07-06 12:17:57,301-DEBUG-Starting new HTTPS connection (1): colinkraymond.bubbleapps.io:443
2024-07-06 12:17:57,475-DEBUG-https://colinkraymond.bubbleapps.io:443 "GET /version-test/api/1.1/obj/user?cursor=0&limit=100 HTTP/1.1" 200 None
2024-07-06 12:17:57,477-INFO-bubbleAPI.get_records > [{'Modified Date': '2024-07-04T20:06:35.999Z', 'Created Date': '2024-07-04T16:37:38.938Z', 'first_name': 'Colin', 'last_name': 'Raymond', 'user_signed_up': True, 'authentication': {'email': {'email': 'colin@judydevice.com', 'email_confirmed': None}}, 'middle_name': 'Kile', 'type': 'patient', 'caretaker': '1719433427015x760125662067258500', 'bday': '1979-08-06T04:00:00.000Z', 'gender': 'Male', 'watcher': ['1719860906321x399833294943004350', '1719524279490x374511007917295100', '1719455494380x913745027397094800'], 'home': 'Annandale, VA', '_id': '1720111058938x567839568571831800'}]
2024-07-06 12:17:57,477-INFO-bubbleAPI.get_records > Total user records pulled: 1
2024-07-06 12:17:57,477-DEBUG-patientInfo.import_data > {'Modified Date': '2024-07-04T20:06:35.999Z', 'Created Date': '2024-07-04T16:37:38.938Z', 'first_name': 'Colin', 'last_name': 'Raymond', 'user_signed_up': True, 'authentication': {'email': {'email': 'colin@judydevice.com', 'email_confirmed': None}}, 'middle_name': 'Kile', 'type': 'patient', 'caretaker': '1719433427015x760125662067258500', 'bday': '1979-08-06T04:00:00.000Z', 'gender': 'Male', 'watcher': ['1719860906321x399833294943004350', '1719524279490x374511007917295100', '1719455494380x913745027397094800'], 'home': 'Annandale, VA', '_id': '1720111058938x567839568571831800'}
2024-07-06 12:17:57,477-INFO-bubbleAPI.get_exch_conv > Getting, interest, records from Bubble.
2024-07-06 12:17:57,480-DEBUG-Starting new HTTPS connection (1): colinkraymond.bubbleapps.io:443
2024-07-06 12:17:57,671-DEBUG-https://colinkraymond.bubbleapps.io:443 "GET /version-test/api/1.1/obj/interest?cursor=0&limit=100 HTTP/1.1" 200 None
2024-07-06 12:17:57,673-INFO-bubbleAPI.get_records > [{'Modified Date': '2024-07-04T16:42:04.414Z', 'Created Date': '2024-07-04T16:42:04.414Z', 'Created By': '1719433427015x760125662067258500', 'interest': 'United States Military Academy', 'patient': '1720111058938x567839568571831800', 'type': 'school', 'caretaker': '1719433427015x760125662067258500', '_id': '1720111324098x329160056985092100'}, {'Modified Date': '2024-07-04T16:42:12.546Z', 'Created Date': '2024-07-04T16:42:12.545Z', 'Created By': '1719433427015x760125662067258500', 'interest': 'Carnegie Mellon University', 'patient': '1720111058938x567839568571831800', 'type': 'school', 'caretaker': '1719433427015x760125662067258500', '_id': '1720111332403x851076958578802700'}, {'Modified Date': '2024-07-04T16:42:21.076Z', 'Created Date': '2024-07-04T16:42:21.075Z', 'Created By': '1719433427015x760125662067258500', 'interest': 'Upper Saint Clair High School', 'patient': '1720111058938x567839568571831800', 'type': 'school', 'caretaker': '1719433427015x760125662067258500', '_id': '1720111340932x971953488665509900'}, {'Modified Date': '2024-07-04T16:42:33.503Z', 'Created Date': '2024-07-04T16:42:33.503Z', 'Created By': '1719433427015x760125662067258500', 'interest': 'Steelers', 'patient': '1720111058938x567839568571831800', 'type': 'sport', 'caretaker': '1719433427015x760125662067258500', '_id': '1720111353206x612392321700855800'}, {'Modified Date': '2024-07-04T16:42:37.345Z', 'Created Date': '2024-07-04T16:42:37.345Z', 'Created By': '1719433427015x760125662067258500', 'interest': 'Soccer', 'patient': '1720111058938x567839568571831800', 'type': 'sport', 'caretaker': '1719433427015x760125662067258500', '_id': '1720111357204x221548795553382400'}]
2024-07-06 12:17:57,673-INFO-bubbleAPI.get_records > Total interest records pulled: 17
2024-07-06 12:17:57,673-DEBUG-patientBG.__init__ > {'school': ['United States Military Academy', 'Carnegie Mellon University', 'Upper Saint Clair High School'], 'sport': ['Steelers', 'Soccer'], 'food': ['Carpaccio', "Tour d'Argent", 'Italian Food', 'Candy', 'Buffalo Wings'], 'place': ['Pittsburgh', 'Lisbon'], 'hobby': ['Computer Programming', 'Travel', 'Reading', 'Science Fiction', 'Fantasy'], 'other': []}
2024-07-06 12:17:57,673-INFO-bubbleAPI.get_exch_conv > Getting, friends, records from Bubble.
2024-07-06 12:17:57,677-DEBUG-Starting new HTTPS connection (1): colinkraymond.bubbleapps.io:443
2024-07-06 12:17:57,977-DEBUG-https://colinkraymond.bubbleapps.io:443 "GET /version-test/api/1.1/obj/friends?cursor=0&limit=100 HTTP/1.1" 200 None
2024-07-06 12:17:57,983-INFO-bubbleAPI.get_records > [{'Modified Date': '2024-07-04T16:38:45.666Z', 'Created Date': '2024-07-04T16:38:45.548Z', 'Created By': '1719433427015x760125662067258500', 'birthday': '1979-05-21T04:00:00.000Z', 'deceased': False, 'first_name': 'Luciane', 'last_name': 'Raymond', 'location': {'address': 'Annandale, VA, USA', 'lat': 38.8303905, 'lng': -77.1963703}, 'nickname': 'Lucy', 'relationship': 'Wife', 'interests': 'Camping, Gardening, Volleyball', 'patient': '1720111058938x567839568571831800', 'caretaker': '1719433427015x760125662067258500', '_id': '1720111125158x151467745509638140'}, {'Modified Date': '2024-07-04T16:39:28.865Z', 'Created Date': '2024-07-04T16:39:28.855Z', 'Created By': '1719433427015x760125662067258500', 'birthday': '2009-03-21T04:00:00.000Z', 'deceased': False, 'first_name': 'Adelaide', 'last_name': 'Raymond', 'location': {'address': 'Annandale, VA, USA', 'lat': 38.8303905, 'lng': -77.1963703}, 'nickname': 'Addie', 'relationship': 'Daughter', 'interests': 'Volleyball, Drawing, History', 'patient': '1720111058938x567839568571831800', 'caretaker': '1719433427015x760125662067258500', '_id': '1720111168595x906466426238271500'}, {'Modified Date': '2024-07-04T16:40:13.729Z', 'Created Date': '2024-07-04T16:40:13.719Z', 'Created By': '1719433427015x760125662067258500', 'birthday': '2011-01-15T05:00:00.000Z', 'deceased': False, 'first_name': 'Bruce', 'last_name': 'Raymond', 'location': {'address': 'Annandale, VA, USA', 'lat': 38.8303905, 'lng': -77.1963703}, 'nickname': 'Boo Boo', 'relationship': 'Son', 'interests': 'Soccer, History, Model Making', 'patient': '1720111058938x567839568571831800', 'caretaker': '1719433427015x760125662067258500', '_id': '1720111213481x670261540952997900'}, {'Modified Date': '2024-07-04T16:41:14.778Z', 'Created Date': '2024-07-04T16:41:14.722Z', 'Created By': '1719433427015x760125662067258500', 'birthday': '2012-07-16T04:00:00.000Z', 'deceased': False, 'first_name': 'Elizabeth', 'last_name': 'Raymond', 'location': {'address': 'Annandale, VA, USA', 'lat': 38.8303905, 'lng': -77.1963703}, 'nickname': 'Liz', 'relationship': 'Daughter', 'interests': 'Tae Kwan Do, Volleyball, Reading, Writing', 'patient': '1720111058938x567839568571831800', 'caretaker': '1719433427015x760125662067258500', '_id': '1720111274111x705272155291779100'}, {'Modified Date': '2024-07-04T16:41:54.388Z', 'Created Date': '2024-07-04T16:41:54.359Z', 'Created By': '1719433427015x760125662067258500', 'birthday': '2014-09-14T04:00:00.000Z', 'deceased': False, 'first_name': 'Llilian', 'last_name': 'Raymond', 'location': {'address': 'Annandale, VA, USA', 'lat': 38.8303905, 'lng': -77.1963703}, 'nickname': 'Lily', 'relationship': 'Daughter', 'interests': 'Diving, Gymnastics, Art, Exploring', 'patient': '1720111058938x567839568571831800', 'caretaker': '1719433427015x760125662067258500', '_id': '1720111313805x974908641979400200'}]
2024-07-06 12:17:57,984-INFO-bubbleAPI.get_records > Total friends records pulled: 5
2024-07-06 12:17:57,984-INFO-patientFriends.__init__ > Friend info Patient does not exist.
2024-07-06 12:17:57,984-INFO-patientFriends.__init__ > Friend info Patient does not exist.
2024-07-06 12:17:57,984-INFO-patientFriends.__init__ > Friend info Patient does not exist.
2024-07-06 12:17:57,984-INFO-patientFriends.__init__ > Friend info Patient does not exist.
2024-07-06 12:17:57,984-INFO-patientFriends.__init__ > Friend info Patient does not exist.
2024-07-06 12:17:57,985-DEBUG-patientFriends.__init__ > [{'bday': '1979-05-21T04:00:00.000Z', 'deceased': False, 'fname': 'Luciane', 'interests': 'Camping, Gardening, Volleyball', 'lname': 'Raymond', 'location': {'address': 'Annandale, VA, USA', 'lat': 38.8303905, 'lng': -77.1963703}, 'nname': 'Lucy', 'relationship': 'Wife'}, {'bday': '2009-03-21T04:00:00.000Z', 'deceased': False, 'fname': 'Adelaide', 'interests': 'Volleyball, Drawing, History', 'lname': 'Raymond', 'location': {'address': 'Annandale, VA, USA', 'lat': 38.8303905, 'lng': -77.1963703}, 'nname': 'Addie', 'relationship': 'Daughter'}, {'bday': '2011-01-15T05:00:00.000Z', 'deceased': False, 'fname': 'Bruce', 'interests': 'Soccer, History, Model Making', 'lname': 'Raymond', 'location': {'address': 'Annandale, VA, USA', 'lat': 38.8303905, 'lng': -77.1963703}, 'nname': 'Boo Boo', 'relationship': 'Son'}, {'bday': '2012-07-16T04:00:00.000Z', 'deceased': False, 'fname': 'Elizabeth', 'interests': 'Tae Kwan Do, Volleyball, Reading, Writing', 'lname': 'Raymond', 'location': {'address': 'Annandale, VA, USA', 'lat': 38.8303905, 'lng': -77.1963703}, 'nname': 'Liz', 'relationship': 'Daughter'}, {'bday': '2014-09-14T04:00:00.000Z', 'deceased': False, 'fname': 'Llilian', 'interests': 'Diving, Gymnastics, Art, Exploring', 'lname': 'Raymond', 'location': {'address': 'Annandale, VA, USA', 'lat': 38.8303905, 'lng': -77.1963703}, 'nname': 'Lily', 'relationship': 'Daughter'}]
2024-07-06 12:17:57,985-INFO-bubbleAPI.get_exch_conv > Getting, faq, records from Bubble.
2024-07-06 12:17:57,988-DEBUG-Starting new HTTPS connection (1): colinkraymond.bubbleapps.io:443
2024-07-06 12:17:58,174-DEBUG-https://colinkraymond.bubbleapps.io:443 "GET /version-test/api/1.1/obj/faq?cursor=0&limit=100 HTTP/1.1" 200 None
2024-07-06 12:17:58,175-INFO-bubbleAPI.get_records > [{'Modified Date': '2024-07-04T16:44:14.146Z', 'Created Date': '2024-07-04T16:44:14.146Z', 'Created By': '1719433427015x760125662067258500', 'answer': 'Six but there are going to be many more!', 'patient': '1720111058938x567839568571831800', 'question': 'How many superbowls have the Steelers won?', '_id': '1720111453605x972362936015650800'}, {'Modified Date': '2024-07-04T16:44:40.155Z', 'Created Date': '2024-07-04T16:44:40.154Z', 'Created By': '1719433427015x760125662067258500', 'answer': 'As long as the sun is shining in the sky.', 'patient': '1720111058938x567839568571831800', 'question': 'Will Army beat Navy?', '_id': '1720111479990x430417171840237600'}]
2024-07-06 12:17:58,175-INFO-bubbleAPI.get_records > Total faq records pulled: 2
2024-07-06 12:17:58,176-INFO-judyMVP.__init__ > Starting maintenance thread.
2024-07-06 12:17:58,176-INFO-bubbleAPI.check_for_summ > Checking Bubble for summary on 2024-06-29.
2024-07-06 12:17:58,179-DEBUG-Starting new HTTPS connection (1): colinkraymond.bubbleapps.io:443
2024-07-06 12:17:58,389-DEBUG-https://colinkraymond.bubbleapps.io:443 "POST /version-test/api/1.1/wf/check_for_summ HTTP/1.1" 200 None
2024-07-06 12:17:58,391-INFO-bubbleAPI.check_for_summ > Checking Bubble for summary on 2024-06-30.
2024-07-06 12:17:58,394-DEBUG-Starting new HTTPS connection (1): colinkraymond.bubbleapps.io:443
2024-07-06 12:17:58,942-DEBUG-https://colinkraymond.bubbleapps.io:443 "POST /version-test/api/1.1/wf/check_for_summ HTTP/1.1" 200 None
2024-07-06 12:17:58,944-INFO-bubbleAPI.check_for_summ > Checking Bubble for summary on 2024-07-01.
2024-07-06 12:17:58,947-DEBUG-Starting new HTTPS connection (1): colinkraymond.bubbleapps.io:443
2024-07-06 12:17:59,152-DEBUG-https://colinkraymond.bubbleapps.io:443 "POST /version-test/api/1.1/wf/check_for_summ HTTP/1.1" 200 None
2024-07-06 12:17:59,154-INFO-bubbleAPI.check_for_summ > Checking Bubble for summary on 2024-07-02.
2024-07-06 12:17:59,157-DEBUG-Starting new HTTPS connection (1): colinkraymond.bubbleapps.io:443
2024-07-06 12:17:59,355-DEBUG-https://colinkraymond.bubbleapps.io:443 "POST /version-test/api/1.1/wf/check_for_summ HTTP/1.1" 200 None
2024-07-06 12:17:59,357-INFO-bubbleAPI.check_for_summ > Checking Bubble for summary on 2024-07-03.
2024-07-06 12:17:59,360-DEBUG-Starting new HTTPS connection (1): colinkraymond.bubbleapps.io:443
2024-07-06 12:17:59,574-DEBUG-https://colinkraymond.bubbleapps.io:443 "POST /version-test/api/1.1/wf/check_for_summ HTTP/1.1" 200 None
2024-07-06 12:17:59,576-INFO-bubbleAPI.check_for_summ > Checking Bubble for summary on 2024-07-04.
2024-07-06 12:17:59,580-DEBUG-Starting new HTTPS connection (1): colinkraymond.bubbleapps.io:443
2024-07-06 12:17:59,793-DEBUG-https://colinkraymond.bubbleapps.io:443 "POST /version-test/api/1.1/wf/check_for_summ HTTP/1.1" 200 None
2024-07-06 12:17:59,794-INFO-bubbleAPI.check_for_summ > Checking Bubble for summary on 2024-07-05.
2024-07-06 12:17:59,799-DEBUG-Starting new HTTPS connection (1): colinkraymond.bubbleapps.io:443
2024-07-06 12:18:00,237-DEBUG-https://colinkraymond.bubbleapps.io:443 "POST /version-test/api/1.1/wf/check_for_summ HTTP/1.1" 200 None
2024-07-06 12:18:00,249-DEBUG-load_ssl_context verify=True cert=None trust_env=True http2=False
2024-07-06 12:18:00,250-DEBUG-load_verify_locations cafile='/Users/colin/Judy/.venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-07-06 12:18:00,292-DEBUG-close.started
2024-07-06 12:18:00,292-DEBUG-close.complete
2024-07-06 12:18:00,296-DEBUG-Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'user', 'content': 'The following lines contain information about the past seven \n        days of conversations between me, called the patient, and you. One field is called summary and contains a \n        summary of what was talked about that day. The second is keywords and contains a tuple that has each \n        keywords and how often it came up. The final field is sentiment, which contains a numerical rating for how\n         I seem to be feeling. 1 would be extremely depressed and 5 would be extremely happy.  '}, {'role': 'user', 'content': "{'id': '1720111966147x234517028243522940', 'sentiment': 5, 'summary': 'Patient asked about Euro Cup soccer scores and then asked about flights to Europe and prices.', 'conv_count': 7, 'exch_count': 15, 'keywords': [{'Sports': 1}, {'soccer': 1}, {'euro': 1}, {'travel': 1}], 'date': datetime.date(2024, 6, 29), 'patient_id': '1720111058938x567839568571831800', 'caretaker_id': '1719433427015x760125662067258500', 'watcher_ids': ['1719524279490x374511007917295100', '1719860906321x399833294943004350', '1719455494380x913745027397094800']}"}, {'role': 'user', 'content': "{'id': '1720111899553x522663186366400000', 'sentiment': 1, 'summary': 'Patient asked for several jokes and also told two to the device. The patient also expressed a desire for food.', 'conv_count': 10, 'exch_count': 34, 'keywords': [{'Fun': 1}, {'Jokes': 1}, {'Hungry': 1}], 'date': datetime.date(2024, 6, 30), 'patient_id': '1720111058938x567839568571831800', 'caretaker_id': '1719433427015x760125662067258500', 'watcher_ids': ['1719524279490x374511007917295100', '1719860906321x399833294943004350', '1719455494380x913745027397094800']}"}, {'role': 'user', 'content': "{'id': '1720111813272x314655497201001600', 'sentiment': 2, 'summary': 'Patient expressed feelings of loneliness and asked to speak to family.', 'conv_count': 3, 'exch_count': 7, 'keywords': [{'Lonely': 1}], 'date': datetime.date(2024, 7, 1), 'patient_id': '1720111058938x567839568571831800', 'caretaker_id': '1719433427015x760125662067258500', 'watcher_ids': ['1719524279490x374511007917295100', '1719860906321x399833294943004350', '1719455494380x913745027397094800']}"}, {'role': 'user', 'content': "{'id': '1720111708944x513810170356683300', 'sentiment': 4, 'summary': 'Patient asked several questions about how the Steelers were doing and seemed interested in finding a place to eat.', 'conv_count': 6, 'exch_count': 18, 'keywords': [{'Pittsburgh': 1}, {'Music': 1}, {'Hungry': 1}], 'date': datetime.date(2024, 7, 2), 'patient_id': '1720111058938x567839568571831800', 'caretaker_id': '1719433427015x760125662067258500', 'watcher_ids': ['1719524279490x374511007917295100', '1719860906321x399833294943004350', '1719455494380x913745027397094800']}"}, {'role': 'user', 'content': "{'id': '1720111631696x195053344073103940', 'sentiment': 2, 'summary': 'Patient had a lot of questions around their location and seemed to be unable to determine where they were.', 'conv_count': 3, 'exch_count': 9, 'keywords': [{'Location': 1}, {'Confused': 1}], 'date': datetime.date(2024, 7, 3), 'patient_id': '1720111058938x567839568571831800', 'caretaker_id': '1719433427015x760125662067258500', 'watcher_ids': ['1719524279490x374511007917295100', '1719860906321x399833294943004350', '1719455494380x913745027397094800']}"}, {'role': 'user', 'content': '{\'id\': \'1720281009844x408996162847501400\', \'sentiment\': 4, \'summary\': "The patient, Colin, discussed his family, his wife Luciane\'s birthday, and plans for celebrating the 4th of July.", \'conv_count\': 4, \'exch_count\': 11, \'keywords\': [{\'family\': 2}, {\'Luciane\': 2}, {\'birthday\': 1}, {\'4th of July\': 2}, {\'Washington, DC\': 2}], \'date\': datetime.date(2024, 7, 4), \'patient_id\': \'1720111058938x567839568571831800\', \'caretaker_id\': \'1719433427015x760125662067258500\', \'watcher_ids\': [\'1719860906321x399833294943004350\', \'1719455494380x913745027397094800\', \'1719524279490x374511007917295100\']}'}, {'role': 'user', 'content': "{'id': '1720281012486x608475535988242000', 'sentiment': 4, 'summary': 'The patient, Colin, discussed various topics including family members, birthday plans, and activities with his son, expressing interest in spending quality time together.', 'conv_count': 5, 'exch_count': 12, 'keywords': [{'family': 2}, {'birthday': 1}, {'son': 2}, {'activities': 2}, {'quality time': 1}], 'date': datetime.date(2024, 7, 5), 'patient_id': '1720111058938x567839568571831800', 'caretaker_id': '1719433427015x760125662067258500', 'watcher_ids': ['1719860906321x399833294943004350', '1719455494380x913745027397094800', '1719524279490x374511007917295100']}"}, {'role': 'user', 'content': "Analyze the information provided the fields above and provide a \n                                       JSON formatted response containing a summary. The JSON output should have three \n                                       fields: summary, sentiment, and keywords. The following instructions dictate how \n                                       the fields should be formatted and the type of information they should have.\n\n                                       Summary should be a one sentence summary of the conversation that highlights \n                                       what was talked about and talking about any emotions or concerns that I have \n                                       should be identified. Also, you should refer to me as the patient and yourself \n                                       as the assistant. The summary should begin with the phrase \n                                       'Over the past seven days'\n\n                                       In sentiment, assign a number between 1 and 5 for how I seem to be feeling. 1 \n                                       would be extremely depressed and 5 would be extremely happy.\n\n                                       In keywords, provide a list of tuples of any places, people, or events that are \n                                       referenced in our conversation. Each tuple should have the keyword as a string \n                                       and an integer which is the number of times the keyword is referenced. The list \n                                       should be no more than five items long."}], 'model': 'gpt-3.5-turbo', 'temperature': 0}}
2024-07-06 12:18:00,296-DEBUG-Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-07-06 12:18:00,296-DEBUG-connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2024-07-06 12:18:00,306-DEBUG-connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1082191c0>
2024-07-06 12:18:00,306-DEBUG-start_tls.started ssl_context=<ssl.SSLContext object at 0x108056250> server_hostname='api.openai.com' timeout=5.0
2024-07-06 12:18:00,333-DEBUG-start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1082190d0>
2024-07-06 12:18:00,333-DEBUG-send_request_headers.started request=<Request [b'POST']>
2024-07-06 12:18:00,333-DEBUG-send_request_headers.complete
2024-07-06 12:18:00,333-DEBUG-send_request_body.started request=<Request [b'POST']>
2024-07-06 12:18:00,333-DEBUG-send_request_body.complete
2024-07-06 12:18:00,333-DEBUG-receive_response_headers.started request=<Request [b'POST']>
2024-07-06 12:18:01,907-DEBUG-receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sat, 06 Jul 2024 16:18:01 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'openai-organization', b'user-iwjpkoonfj25h8hq9pxy4g0n'), (b'openai-processing-ms', b'1338'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'60000'), (b'x-ratelimit-remaining-requests', b'9998'), (b'x-ratelimit-remaining-tokens', b'58492'), (b'x-ratelimit-reset-requests', b'13.189s'), (b'x-ratelimit-reset-tokens', b'1.508s'), (b'x-request-id', b'req_f2ea90b9690a747220b57942ab1852fd'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=0t3WR0sC3fMzhr8i7_Y1nCXzz.7ADJDJsQ6aXxtqI9o-1720282681-1.0.1.1-.zjfI27nGIhOLLZ4aakSPmmW_otgde.Yf0TFi2mML4uiiktaug_0Ia8eL4BVpCoOJOeZJepsIosjJBkPPSelxw; path=/; expires=Sat, 06-Jul-24 16:48:01 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Set-Cookie', b'_cfuvid=_aR.5egHNuWOz5nhGPksz8UaGJ_bUNjZ1fKMr8CUwik-1720282681927-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'89f0e8804e983910-IAD'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-07-06 12:18:01,909-INFO-HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-07-06 12:18:01,909-DEBUG-receive_response_body.started request=<Request [b'POST']>
2024-07-06 12:18:01,910-DEBUG-receive_response_body.complete
2024-07-06 12:18:01,910-DEBUG-response_closed.started
2024-07-06 12:18:01,910-DEBUG-response_closed.complete
2024-07-06 12:18:01,911-DEBUG-HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers([('date', 'Sat, 06 Jul 2024 16:18:01 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('openai-organization', 'user-iwjpkoonfj25h8hq9pxy4g0n'), ('openai-processing-ms', '1338'), ('openai-version', '2020-10-01'), ('strict-transport-security', 'max-age=31536000; includeSubDomains'), ('x-ratelimit-limit-requests', '10000'), ('x-ratelimit-limit-tokens', '60000'), ('x-ratelimit-remaining-requests', '9998'), ('x-ratelimit-remaining-tokens', '58492'), ('x-ratelimit-reset-requests', '13.189s'), ('x-ratelimit-reset-tokens', '1.508s'), ('x-request-id', 'req_f2ea90b9690a747220b57942ab1852fd'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=0t3WR0sC3fMzhr8i7_Y1nCXzz.7ADJDJsQ6aXxtqI9o-1720282681-1.0.1.1-.zjfI27nGIhOLLZ4aakSPmmW_otgde.Yf0TFi2mML4uiiktaug_0Ia8eL4BVpCoOJOeZJepsIosjJBkPPSelxw; path=/; expires=Sat, 06-Jul-24 16:48:01 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('set-cookie', '_cfuvid=_aR.5egHNuWOz5nhGPksz8UaGJ_bUNjZ1fKMr8CUwik-1720282681927-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('server', 'cloudflare'), ('cf-ray', '89f0e8804e983910-IAD'), ('content-encoding', 'gzip'), ('alt-svc', 'h3=":443"; ma=86400')])
2024-07-06 12:18:01,911-DEBUG-request_id: req_f2ea90b9690a747220b57942ab1852fd
2024-07-06 12:18:01,913-INFO-bubbleAPI.save_daily_summary > Updating weekly summary (ID: None) to Bubble.
2024-07-06 12:18:01,916-DEBUG-Starting new HTTPS connection (1): colinkraymond.bubbleapps.io:443
2024-07-06 12:18:02,335-DEBUG-https://colinkraymond.bubbleapps.io:443 "POST /version-test/api/1.1/wf/save_weekly_summ HTTP/1.1" 200 None
